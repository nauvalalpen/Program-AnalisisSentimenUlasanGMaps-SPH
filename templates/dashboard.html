{% extends "base.html" %} {% block content %}
<div class="row mb-4 align-items-center">
  <div class="col-md-6">
    <h2 class="fw-bold">Live Dashboard</h2>
    <p class="text-muted">Pantau reputasi berdasarkan waktu.</p>
  </div>
  <div class="col-md-6 text-end">
    <!-- Filter Waktu -->
    <div class="btn-group" role="group">
      <a
        href="?timeframe=day"
        class="btn btn-outline-primary {% if timeframe=='day' %}active{% endif %}"
        >Hari Ini</a
      >
      <a
        href="?timeframe=week"
        class="btn btn-outline-primary {% if timeframe=='week' %}active{% endif %}"
        >Minggu Ini</a
      >
      <a
        href="?timeframe=month"
        class="btn btn-outline-primary {% if timeframe=='month' %}active{% endif %}"
        >Bulan Ini</a
      >
      <a
        href="?timeframe=all"
        class="btn btn-outline-primary {% if timeframe=='all' %}active{% endif %}"
        >Semua</a
      >
    </div>
  </div>
</div>

<!-- Statistik User (Cards) -->
<div class="row">
  {% for name, info in stats.items() %}
  <div class="col-md-6 mb-4">
    <div class="card shadow-sm h-100 border-0">
      <div class="card-body">
        <div class="d-flex justify-content-between mb-2">
          <h5 class="card-title fw-bold">{{ name }}</h5>
          <span class="badge bg-light text-dark border"
            >{{ info.total }} Ulasan</span
          >
        </div>
        <h2
          class="{% if info.score >= 70 %}text-success{% elif info.score >= 50 %}text-warning{% else %}text-danger{% endif %}"
        >
          {{ info.score }}% <span class="fs-6 text-muted">Positif</span>
        </h2>
        <div class="progress" style="height: 10px">
          <div
            class="progress-bar bg-success"
            style="width: {{ info.score }}%"
          ></div>
          <div
            class="progress-bar bg-danger"
            style="width: {{ 100 - info.score }}%"
          ></div>
        </div>
        <div class="mt-2 small text-muted">
          {{ info.pos }} Positif vs {{ info.neg }} Negatif
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}
